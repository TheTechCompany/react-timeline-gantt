var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,r=(e,t)=>{for(var s in t||(t={}))i.call(t,s)&&a(e,s,t[s]);if(o)for(var s of o(t))n.call(t,s)&&a(e,s,t[s]);return e},l=(e,o)=>t(e,s(o));import{r as h,R as d,h as c,q as p,d as u,B as m,v as g,a as k,b as f,c as y}from"./vendor.ca2026f7.js";const v={header:{top:{style:{backgroundColor:"#333333",fontSize:10,color:"white",textAlign:"center"}},middle:{style:{backgroundColor:"chocolate"},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}},bottom:{style:{background:"grey",color:"white",fontSize:9},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}}},taskList:{title:{label:"Projects",style:{backgroundColor:"#333333",borderBottom:"solid 1px silver",color:"white",textAlign:"center"}},task:{style:{backgroundColor:"#fbf9f9"}},verticalSeparator:{style:{backgroundColor:"#333333"},grip:{style:{backgroundColor:"#cfcfcd"}}}},dataViewPort:{rows:{style:{}},task:{showLabel:!1,style:{position:"absolute",borderRadius:14,color:"white",textAlign:"center",backgroundColor:"grey"},selectedStyle:{position:"absolute",borderRadius:14,border:"solid 1px #ff00fa",color:"white",textAlign:"center",backgroundColor:"grey"}}},links:{color:"black",selectedColor:"#ff00fa"}};const w=new class{constructor(){this.load=e=>{this.data={},e?this.populate(e,v,this.data):this.data=v},this.data=v}populate(e,t,s){if(this.isObject(t))for(let o in t)e[o]?(s[o]=e[o],this.populate(e[o],t[o],s[o])):s[o]=t[o]}isObject(e){return"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e}get values(){return this.data}};class x extends h.exports.Component{constructor(e){super(e),this.doMouseMove=this.doMouseMove.bind(this),this.doMouseDown=this.doMouseDown.bind(this),this.doMouseUp=this.doMouseUp.bind(this),this.state={dragging:!1}}doMouseDown(e){0===e.button&&(this.draggingPosition=e.clientX,this.setState({dragging:!0}))}componentDidUpdate(e,t){this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp))}doMouseMove(e){if(this.state.dragging){e.stopPropagation();let t=this.draggingPosition-e.clientX;this.draggingPosition=e.clientX,this.props.onTaskListSizing(t)}}doMouseUp(e){this.setState({dragging:!1})}render(){return d.createElement("div",{className:"verticalResizer",style:w.values.taskList.verticalSeparator.style,onMouseDown:this.doMouseDown},d.createElement("div",{className:"squareGrip",style:w.values.taskList.verticalSeparator.grip.style}),d.createElement("div",{className:"squareGrip",style:w.values.taskList.verticalSeparator.grip.style}),d.createElement("div",{className:"squareGrip",style:w.values.taskList.verticalSeparator.grip.style}),d.createElement("div",{className:"squareGrip",style:w.values.taskList.verticalSeparator.grip.style}))}}const E=new class{constructor(){this.dayToPosition=(e,t,s)=>e*s+t,this.daysInYear=e=>this.isLeapYear(e)?366:365}dateToPixel(e,t,s){let o=this.getToday(),i=new Date(e),n=60*(i.getTimezoneOffset()-o.getTimezoneOffset())*1e3;return(i.getTime()-o.getTime()-n)/36e5*(s/24)+t}pixelToDate(e,t,s){let o=24/s,i=e-t,n=this.getToday(),a=n.getTime()+i*o*36e5,r=new Date(a),l=60*(r.getTimezoneOffset()-n.getTimezoneOffset())*1e3;return r.setTime(r.getTime()+l),r}getToday(){let e=new Date;return e.setHours(0,0,0,0),e}monthDiff(e,t){return Math.abs(t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()))}daysInMonth(e,t){return new Date(t,e,0).getDate()}isLeapYear(e){return e%400==0||e%100!=0&&e%4==0}};const S=e=>d.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px white",position:"absolute",height:20,left:e.left,width:e.width}},d.createElement("div",null,e.label)),b=d.createContext({}),M=e=>d.createElement("div",{style:{position:"absolute",background:e.background,left:e.left,height:"100%",width:`${e.width}px`}}),C=e=>{const t=h.exports.useRef(null),{mode:s,dayWidth:o}=h.exports.useContext(b),i=(e,t)=>{switch(e){case"year":return"YYYY";case"month":return"top"==t?"MMMM YYYY":"MMMM";case"week":return"top"==t?"ww MMMM YYYY":"ww";case"dayweek":return"dd";case"daymonth":return"D"}},n=(e,t,s,o)=>{let i=[],n=t/24,a=0;for(let r=0;r<24;r++)i.push(d.createElement(S,{key:r,left:a,width:n,label:"shorttime"==s?r:`${r}:00`})),a+=n;return d.createElement("div",{key:o,style:{position:"absolute",height:20,left:e,width:t}}," ",i)},a=(t,s,i=0)=>{let n=((e,t)=>{switch(t){case"year":return E.daysInYear(e.year());case"month":return e.daysInMonth();case"week":return 7;default:return 1}})(t,s)*(o||0);if(!i){let n=((e,t)=>{let s=null;switch(t){case"year":return s=e.year(),c([s,0,1]);case"month":s=e.year();let t=e.month();return c([s,t,1]);case"week":return e.clone().startOf("week");default:return e}})(t,s);n=n.startOf("day");let a=c().startOf("day"),r=n.diff(a,"days");i=E.dayToPosition(r,e.nowposition||0,o||0)}return{left:i,width:n}},l=(t,s,o)=>{let l={top:[],middle:[],bottom:[],background:[]},h={},p="",u="",m="",g=null,k=null,f=e.currentday,y=(e.currentday||0)+(e.numVisibleDays||0);for(let e=(f||0)-30;e<y+30;e++)if(g=c().add(e,"days"),p!=g.format(i(t,"top"))&&(p=g.format(i(t,"top")),k=a(g,t,h.top),h.top=k.left+k.width,l.top.push(d.createElement(S,{key:e,left:k.left,width:k.width,label:p}))),u!=g.format(i(s))&&(u=g.format(i(s)),k=a(g,s,h.middle),h.middle=k.left+k.width,l.middle.push(d.createElement(S,{key:e,left:k.left,width:k.width,label:u}))),m!=g.format(i(o)))if(m=g.format(i(o)),k=a(g,o,h.bottom),h.bottom=k.left+k.width,"shorttime"==o||"fulltime"==o){let t=Array.apply(null,Array(24)).map((function(){})).map(((t,s)=>d.createElement(M,{key:`tile-${e}-${s}`,background:s%2==0?"#5d9634":"#538c2b",left:k.left+k.width/24*s,width:k.width/24})));l.background.push(t),l.bottom.push(n(k.left,k.width,o,e))}else l.background.push(d.createElement(M,{key:`tile-${e}`,left:k.left,width:k.width,background:e%2==0?"#5d9634":"#538c2b"})),l.bottom.push(d.createElement(S,{key:e,left:k.left,width:k.width,label:m}));return d.createElement("div",{className:"timeLine-main-header-container",style:{width:5e3,maxWidth:5e3}},d.createElement("div",{className:"header-top",style:r({},w.values.header.top.style)},l.top),d.createElement("div",{className:"header-middle",style:r({},w.values.header.middle.style)},l.middle),d.createElement("div",{className:"header-bottom",style:r({},w.values.header.bottom.style)},l.bottom),d.createElement("div",{className:"header-bottom",style:r({height:"100%"},w.values.header.bottom.style)},l.background))};return t.current&&(t.current.scrollLeft=e.scrollLeft||0),d.createElement("div",{id:"timeline-header",ref:t,className:"timeLine-main-header-viewPort"},(()=>{switch(s||e.mode){case"day":return l("week","dayweek","fulltime");case"week":return l("month","week","dayweek");case"month":return l("month","dayweek","daymonth");case"year":return l("year","month","week")}})())};class L extends h.exports.Component{constructor(e){super(e),this.onCreateLinkMouseDown=(e,t)=>{var s,o;0===e.button&&(e.stopPropagation(),null==(o=(s=this.props).onStartCreateLink)||o.call(s,this.props.item,t))},this.onCreateLinkMouseUp=(e,t)=>{e.stopPropagation(),this.props.onFinishCreateLink(this.props.item,t)},this.onCreateLinkTouchStart=(e,t)=>{var s,o;e.stopPropagation(),null==(o=(s=this.props).onStartCreateLink)||o.call(s,this.props.item,t)},this.onCreateLinkTouchEnd=(e,t)=>{e.stopPropagation(),this.props.onFinishCreateLink(this.props.item,t)},this.doMouseDown=(e,t)=>{this.props.onUpdateTask&&0===e.button&&(e.stopPropagation(),this.dragStart(e.clientX,t))},this.doMouseMove=e=>{this.state.dragging&&(e.stopPropagation(),this.dragProcess(e.clientX))},this.doMouseUp=()=>{this.dragEnd()},this.doTouchStart=(e,t)=>{this.props.onUpdateTask&&(console.log("start"),e.stopPropagation(),this.dragStart(e.touches[0].clientX,t))},this.doTouchMove=e=>{this.state.dragging&&(console.log("move"),e.stopPropagation(),this.dragProcess(e.changedTouches[0].clientX))},this.doTouchEnd=e=>{console.log("end"),this.dragEnd()},this.calculateStyle=this.calculateStyle.bind(this),this.state={dragging:!1,left:this.props.left||0,width:this.props.width||0,mode:0}}componentDidUpdate(e,t){this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp),document.addEventListener("touchmove",this.doTouchMove),document.addEventListener("touchend",this.doTouchEnd)):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp),document.removeEventListener("touchmove",this.doTouchMove),document.removeEventListener("touchend",this.doTouchEnd))}dragStart(e,t){this.props.onChildDrag(!0),this.draggingPosition=e,this.setState({dragging:!0,mode:t,left:this.props.left||0,width:this.props.width||0})}dragProcess(e){let t=this.draggingPosition-e,s=this.state.left,o=this.state.width;switch(this.state.mode){case 1:s=this.state.left-t;break;case 2:s=this.state.left-t,o=this.state.width+t;break;case 3:o=this.state.width-t}let i={item:this.props.item,position:{start:s-this.props.nowposition,end:s+o-this.props.nowposition}};this.props.onTaskChanging(i),this.setState({left:s,width:o}),this.draggingPosition=e}dragEnd(){this.props.onChildDrag(!1);let e=E.pixelToDate(this.state.left,this.props.nowposition,this.props.dayWidth||0),t=E.pixelToDate(this.state.left+this.state.width,this.props.nowposition,this.props.dayWidth||0);this.props.onUpdateTask(this.props.item,{start:e,end:t}),this.setState({dragging:!1,mode:0})}calculateStyle(){let e=this.props.isSelected?w.values.dataViewPort.task.selectedStyle:w.values.dataViewPort.task.style,t=this.props.color?this.props.color:e.backgroundColor;return this.state.dragging?l(r({},e),{backgroundColor:t,left:this.state.left,width:this.state.width,height:this.props.height-5,top:2}):l(r({},e),{backgroundColor:t,left:this.props.left,width:this.props.width,height:this.props.height-5,top:2})}render(){let e=this.calculateStyle();return d.createElement("div",{onMouseDown:e=>this.doMouseDown(e,1),onTouchStart:e=>this.doTouchStart(e,1),onClick:e=>{this.props.onSelectItem(this.props.item)},style:e},d.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:-4,height:e.height},onMouseDown:e=>this.doMouseDown(e,2),onTouchStart:e=>this.doTouchStart(e,2)},d.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseUp:e=>this.onCreateLinkMouseUp(e,"LINK_POS_LEFT"),onTouchEnd:e=>this.onCreateLinkTouchEnd(e,"LINK_POS_LEFT")})),d.createElement("div",{style:{overflow:"hidden"}},w.values.dataViewPort.task.showLabel?this.props.item.name:""),d.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:e.width-3,height:e.height},onMouseDown:e=>this.doMouseDown(e,3),onTouchStart:e=>this.doTouchStart(e,3)},d.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseDown:e=>this.onCreateLinkMouseDown(e,"LINK_POS_RIGHT"),onTouchStart:e=>this.onCreateLinkTouchStart(e,"LINK_POS_RIGHT")})))}}class T extends h.exports.Component{constructor(e){super(e)}render(){return d.createElement("div",{className:"timeLine-main-data-row",style:l(r({},w.values.dataViewPort.rows.style),{top:this.props.top,height:this.props.itemheight,borderBottom:"2px dashed #d3d3d350",strokeDasharray:1e3,strokeDashoffset:1e3})},this.props.children)}}const D=e=>{switch(e){case"year":return 7;case"month":case"week":return 1;case"day":return 1/24;default:return 1}},I=e=>{switch(e){case"year":return"12px";default:return 0}},N=e=>{switch(e){case"day":return 792;case"week":case"month":return 28;case"year":return 4;default:return 28}},P=p((e=>{var t;const s=h.exports.useRef(null),{mode:o,style:i,dayWidth:n,moveTimeline:a,scrollLeft:r}=h.exports.useContext(b),[l,c]=h.exports.useState(!1),[p,m]=u((t=>{var s;let o={width:(null==t?void 0:t.clientWidth)||null,height:(null==t?void 0:t.clientHeight)||null};return o.width&&o.height&&(null==(s=e.onSize)||s.call(e,o)),o})),g=e=>{c(e)};return h.exports.useEffect((()=>{s.current&&(s.current.scrollLeft=0)}),[]),h.exports.useEffect((()=>{s.current&&(s.current.scrollLeft=e.scrollLeft,s.current.scrollTop=e.scrollTop)}),[e.scrollLeft,e.scrollTop]),o&&(null==i?void 0:i.background)?null==(t=null==i?void 0:i.background)||t.call(i,o,n||0):(D(e.mode||"month"),I(e.mode||"month")),!(e.data.length>0)||e.itemheight,d.createElement("div",{ref:s,id:"timeLinedataViewPort",className:`${e.className} timeLine-main-data-viewPort`,onWheel:e=>{null==a||a((r||0)+e.deltaX)},onMouseDown:t=>{0!==t.button||l||e.onMouseDown(t)},onMouseMove:t=>{e.onMouseMove(t,s.current)},onMouseUp:e.onMouseUp,onMouseLeave:e.onMouseLeave,onTouchStart:t=>{l||e.onTouchStart(t)},onTouchMove:t=>{e.onTouchMove(t,s.current)},onTouchEnd:e.onTouchEnd,onTouchCancel:e.onTouchCancel},p,d.createElement("div",{className:"timeLine-main-data-container",style:{background:"transparent",height:"100%",width:5e3,maxWidth:5e3}},(()=>{let t=[];for(let s=e.startRow;s<e.endRow+1;s++){let o=e.data[s];if(!o)break;let i=E.dateToPixel(o.start,e.nowposition,n||0),a=E.dateToPixel(o.end,e.nowposition,n||0)-i;t.push(d.createElement(T,{key:s,label:o.name,top:s*e.itemheight,left:20,itemheight:e.itemheight},d.createElement(L,{item:o,label:o.name,nowposition:e.nowposition,dayWidth:n,color:o.color,left:i,width:a,height:e.itemheight,onChildDrag:g,isSelected:e.selectedItem==o,onSelectItem:e.onSelectItem,onStartCreateLink:e.onStartCreateLink,onFinishCreateLink:e.onFinishCreateLink,onTaskChanging:e.onTaskChanging,onUpdateTask:e.onUpdateTask}," ")))}return t})()))}))`
.timeLine-main-data-container{
  background: ;
  }

`;const $=new class{constructor(){this.data={},this.link={}}registerData(e){if(e){this.data={};for(let t=0;t<e.length;t++)this.data[e[t].id]={item:e[t],index:t}}}registerLinks(e){if(!e)return;this.link={};let t=0,s=0;for(let o=0;o<e.length;o++){t=e[o].start,s=e[o].end;let i={link:e[o],index:o};this.createAddTo(t,this.link,i,o),this.createAddTo(s,this.link,i,o)}}createAddTo(e,t,s,o){t[e]||(t[e]=[]),-1==t[e].indexOf(s)&&t[e].push(s)}getTask(e){return this.data[e]}getLinks(e){return this.link[e]}};class U extends h.exports.Component{constructor(e){super(e),this.calcNormCoordinates=()=>{let e={x:0,y:0},t={x:0,y:0},s=0;return s=this.props.start.x+(this.props.end.x-this.props.start.x)/2,e={x:s,y:this.props.start.y},t={x:s,y:this.props.end.y},{cpt1:e,cpt2:t}},this.calcSCoordinates=()=>{let e={x:this.props.start.x+20,y:this.props.start.y},t=(this.props.end.y-this.props.start.y)/2,s={x:e.x,y:e.y+t},o={x:this.props.end.x-20,y:s.y};return{cpt1:e,cpt2:s,cpt3:o,cpt4:{x:o.x,y:o.y+t}}},this.getPath=e=>{let t=null;return this.props.start.x>this.props.end.x?(t=this.calcSCoordinates(),`M${this.props.start.x} ${this.props.start.y}  ${t.cpt1.x} ${t.cpt1.y} ${t.cpt2.x} ${t.cpt2.y} ${t.cpt3.x} ${t.cpt3.y} ${t.cpt4.x} ${t.cpt4.y} ${this.props.end.x} ${this.props.end.y}`):(t=this.calcNormCoordinates(),`M${this.props.start.x} ${this.props.start.y}  ${t.cpt1.x} ${t.cpt1.y} ${t.cpt2.x} ${t.cpt2.y} ${this.props.end.x} ${this.props.end.y}`)},this.onSelect=e=>{this.props.onSelectItem&&this.props.onSelectItem(this.props.item)}}render(){let e=this.props.isSelected?w.values.links.selectedColor:w.values.links.color;return d.createElement("g",{className:"timeline-link"},d.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:"white",d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"4",cursor:"pointer"}),d.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:e,d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"1",cursor:"pointer",markerEnd:"url(#arrow)"}))}}class R extends h.exports.Component{constructor(e){super(e),this.doMouseMove=e=>{this.init||(this.lastX=e.clientX,this.lastY=e.clientY,this.init=!0);let t=this.state.x+(e.clientX-this.lastX),s=this.state.y+(e.clientY-this.lastY);this.lastX=e.clientX,this.lastY=e.clientY,this.setState({x:t,y:s})},this.doMouseUp=e=>{this.props.onFinishCreateLink()},this.state={x:this.props.start.x,y:this.props.start.y},this.init=!1,this.lastX=-1,this.lastY=-1}componentDidMount(){document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)}componentWillUnmount(){document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp)}render(){return d.createElement(U,{key:-1,start:{x:this.props.start.x,y:this.props.start.y},end:{x:this.state.x,y:this.state.y}})}}const z=e=>{const{links:t,data:s,dayWidth:o}=h.exports.useContext(b);h.exports.useState(null);const[i,n]=h.exports.useState(),[a,r]=h.exports.useState([]),l=(t,s)=>({x:E.dateToPixel(s,0,o||0),y:t*(e.itemheight||0)+(e.itemheight||0)/2});return h.exports.useEffect((()=>{(()=>{if(e.changingTask!=i){n(e.changingTask);let t=$.getLinks(e.changingTask.item.id);if(!t)return;let s=null,o=null,h=null,c={},p={};for(let n=0;n<t.length;n++)s=t[n],o=$.getTask(s.link.start),o&&(h=$.getTask(s.link.end),h&&(c=l(o.index,o.item.end),i.item.id==s.link.start&&(c.x=i.position.end),p=l(h.index,h.item.start),i.item.id==s.link.end&&(p.x=i.position.start),a[s.index]=d.createElement(U,{key:-n-1,item:s,start:{x:c.x,y:c.y},end:{x:p.x,y:p.y},isSelected:e.selectedItem==s,onSelectItem:e.onSelectItem}),r(a)))}})()}),[e.changingTask]),d.createElement("svg",{x:0,y:0,width:"100%",pointerEvents:"none",style:{position:"absolute",top:60,userSelect:"none",height:"100%"}},d.createElement("defs",null,d.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"9",markerHeight:"9",orient:"auto-start-reverse"},d.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"}))),d.createElement("g",{transform:`matrix(1,0,0,1,${-((e.scrollLeft||0)-(e.nowposition||0))},${-(e.scrollTop||0)})`},a,(()=>{var t,s;if(e.interactiveMode){let o=$.getTask(null==(s=null==(t=e.taskToCreate)?void 0:t.task)?void 0:s.id),i=l(null==o?void 0:o.index,null==o?void 0:o.item.end);return d.createElement(R,{start:i,onFinishCreateLink:e.onFinishCreateLink})}})()))};class O extends h.exports.Component{constructor(e){super(e),this.textInput=d.createRef(),this.onFocus=()=>{this.setState({editing:!0})},this.onBlur=()=>{this.finishEditing()},this.handleKey=e=>{13===(e.keyCode||e.which)&&this.finishEditing()},this.finishEditing=()=>{this.isFocus=!1,this.setState({editing:!1}),this.props.onChange&&this.props.onChange(this.state.value)},this.handleChange=e=>{this.setState({value:e.target.value})},this.renderDiv=()=>d.createElement("div",{tabIndex:this.props.index,onClick:this.onFocus,onFocus:this.onFocus,style:{width:"100%"}}," ",this.state.value),this.renderEditor=()=>d.createElement("input",{ref:this.textInput,onBlur:this.onBlur,style:{width:"100%",outlineColor:"black",outlineStyle:"oinset"},type:"text",name:"name",value:this.state.value,onKeyUp:this.handleKey,onChange:this.handleChange}),this.isFocus=!1,this.state={editing:!1,value:this.props.value}}componentDidUpdate(e,t){this.textInput.current&&!this.isFocus&&(this.textInput.current.focus(),this.isFocus=!0)}shouldComponentUpdate(e,t){return e.value!=this.props.value&&this.setState({value:e.value}),!0}render(){return this.state.editing?this.renderEditor():this.renderDiv()}}class Y extends h.exports.Component{constructor(e){super(e),this.onChange=e=>{this.props.onUpdateTask&&this.props.onUpdateTask(this.props.item,{name:e})}}render(){return d.createElement("div",{className:"timeLine-side-task-row",style:l(r({},w.values.taskList.task.style),{top:this.props.top,height:this.props.itemheight}),onClick:e=>this.props.onSelectItem(this.props.item)},this.props.nonEditable?d.createElement("div",{tabIndex:this.props.index,style:{width:"100%"}},this.props.label):d.createElement(O,{value:this.props.label,index:this.props.index,onChange:this.onChange}))}}class F extends h.exports.Component{constructor(e){super(e),this.taskViewRef=d.createRef(),this.doScroll=()=>{this.taskViewRef.current&&this.props.onScroll(this.taskViewRef.current.scrollTop)}}getContainerStyle(e){return{height:e>0?e*this.props.itemheight:10}}renderTaskRow(e){let t=[];for(let s=this.props.startRow;s<this.props.endRow+1;s++){let o=e[s];if(!o)break;t.push(d.createElement(Y,{key:s,index:s,item:o,label:o.name,top:s*this.props.itemheight,itemheight:this.props.itemheight,isSelected:this.props.selectedItem==o,onUpdateTask:this.props.onUpdateTask,onSelectItem:this.props.onSelectItem,nonEditable:this.props.nonEditable}))}return t}render(){let e=this.props.data?this.props.data:[];return this.containerStyle=this.getContainerStyle(e.length),d.createElement("div",{className:"timeLine-side"},d.createElement("div",{className:"timeLine-side-title",style:w.values.taskList.title.style},d.createElement("div",null,w.values.taskList.title.label)),d.createElement("div",{ref:this.taskViewRef,className:"timeLine-side-task-viewPort",onScroll:this.doScroll},d.createElement("div",{className:"timeLine-side-task-container",style:this.containerStyle},this.renderTaskRow(e))))}}class _{constructor(){this.initialise=(e,t,s,o)=>{this.nowposition=s,this.daywidth=o,this.setLimits(e,t),this.loadDataHorizon()},this.setStartEnd=(e,t,s,o)=>{this.nowposition=s,this.daywidth=o,this.needData(e,t)&&(this.setLimits(e,t),this.loadDataHorizon())},this.needData=(e,t)=>e<this.lower_data_limit||t>this.upper_data_limit,this.setLimits=(e,t)=>{this.lower_limit=e-1e3,this.lower_data_limit=e-750,this.upper_limit=t+1e3,this.upper_data_limit=t+750},this.loadDataHorizon=()=>{let e=E.pixelToDate(this.lower_limit,this.nowposition,this.daywidth),t=E.pixelToDate(this.upper_limit,this.nowposition,this.daywidth);this.onHorizonChange(e,t)},this.lower_limit=0,this.upper_limit=0,this._dataToRender=[]}onHorizonChange(e,t){throw new Error("Method not implemented.")}}const X=e=>{const[t,s]=h.exports.useState(!1),[o,i]=h.exports.useState(0),[n,a]=h.exports.useState(24e3),[r,l]=h.exports.useState(0),[c,p]=h.exports.useState(0),[u,k]=h.exports.useState(),[f,y]=h.exports.useState(),[v,E]=h.exports.useState(40),[S,M]=h.exports.useState(60),[L,T]=h.exports.useState(0),[D,I]=h.exports.useState({width:200}),$=h.exports.useRef(N(e.mode||"month")),[U,R]=h.exports.useState(0),[O,Y]=h.exports.useState(!1),[X,W]=h.exports.useState(e.mode?e.mode:"month"),[H,j]=h.exports.useState({width:1,height:1}),[V,A]=h.exports.useState(),[B,K]=h.exports.useState(),G=h.exports.useRef(new _),[q,J]=h.exports.useState(),[Q,Z]=h.exports.useState();h.exports.useState([]),h.exports.useState([]),h.exports.useEffect((()=>{G.current.onHorizonChange=ie,w.load(e.config),G.current.initialise(c+L,c+L+H.width,L,$.current)}),[]);const ee=(t,s,o)=>{let i=Math.trunc(o/(e.itemheight||0));return{start:i,end:i+t>=s.length?s.length:i+t}},te=()=>{G.current.setStartEnd(c,c+H.width,L,$.current)},se=t=>{let s=L,o=-1,i=u,a=f;console.log(e.mode),t>n?(s=L-n-0,o=0):t<=0?(s=L+n+14,o=n):o=t;let l=Math.trunc((t-L)/$.current);i=Math.trunc(r/(e.itemheight||0)),a=i+v>=(e.data||[]).length?(e.data||[]).length-1:i+v,te(),R(l),T(s),Z(Q),p(o),k(i),y(a)},oe=e=>{a(5e3*(1-e.width/5e3)-1)},ie=(t,s)=>{e.onHorizonChange&&e.onHorizonChange(t,s)},ne=t=>{e.onSelectItem&&t!=e.selectedItem&&e.onSelectItem(t)},ae=(t,s)=>{console.log(`End Link ${t}`),e.onCreateLink&&t&&V&&V.task.id!=t.id&&e.onCreateLink({id:g(),start:V,end:t.id}),Y(!1),A(null)},re=(e,t)=>(console.log(e,t||$),Math.ceil(e.width/(t||$.current))+30),le=e=>{if(console.log("Change mode",e),e!=X){let t=N(e),s=Math.ceil(-U*t/n),o=(U*t+L)%n;console.log(e,t),W(e),$.current=t,M(re(H,t)),T(s*n),p(o)}};return h.exports.useEffect((()=>{e.mode&&le(e.mode)}),[e.mode]),d.createElement(b.Provider,{value:{style:e.style,mode:X,scrollLeft:c,moveTimeline:se,changeMode:le,dayWidth:$.current}},d.createElement("div",{className:"timeLine",style:{position:"relative",flex:1}},d.createElement("div",{className:"timeLine-side-main",style:D},d.createElement(F,{itemheight:e.itemheight,startRow:u,endRow:f,data:e.data,selectedItem:e.selectedItem,onSelectItem:ne,onUpdateTask:e.onUpdateTask,onScroll:t=>{if(t==t)return;let s=ee(v,e.data||[],t);s.start!==u&&(l(t),k(s.start),y(s.end))},nonEditable:e.nonEditableName}),d.createElement(x,{onTaskListSizing:e=>{I({width:D.width-e})}})),d.createElement("div",{className:"timeLine-main"},d.createElement(m,{style:{position:"absolute",height:"100%",width:"100%",top:0,left:0},className:"header-container"},d.createElement(C,{headerData:Q,numVisibleDays:S,currentday:U,nowposition:L,scrollLeft:c})),d.createElement(m,{style:{position:"absolute",width:"100%",height:"calc(100% - 60px)",zIndex:9,top:60,left:0}},d.createElement(P,{scrollLeft:c,scrollTop:r,itemheight:e.itemheight,nowposition:L,startRow:u,endRow:f,data:e.data,selectedItem:e.selectedItem,onScroll:q,onMouseDown:e=>{s(!0),i(e.clientX)},onMouseMove:e=>{if(t){let t=o-e.clientX;0!==t&&(i(e.clientX),se(c+t))}},onMouseUp:e=>{s(!1)},onMouseLeave:e=>{s(!1)},onTouchStart:e=>{s(!0),i(e.touches[0].clientX)},onTouchMove:e=>{if(t){let t=o-e.touches[0].clientX;0!==t&&(i(e.touches[0].clientX),se(c+t))}},onTouchEnd:e=>{s(!1)},onTouchCancel:e=>{s(!1)},onSelectItem:ne,onUpdateTask:e.onUpdateTask,onTaskChanging:e=>{console.log("Changing task",e),K(e)},onStartCreateLink:(e,t)=>{console.log("=> Start Link",e,t),Y(!0),A({task:e,position:t})},onFinishCreateLink:ae,boundaries:{lower:c,upper:c+H.width},onSize:t=>{console.log(t,$),oe(t),te();let s=Math.ceil(t.height/(e.itemheight||0)),o=re(t,$.current),i=ee(s,e.data||[],r);M(o),console.log("DAYS",o),E(s),k(i.start),y(i.end),j(t)}}),d.createElement(z,{scrollLeft:c,scrollTop:r,startRow:u,endRow:f,data:e.data||[],nowposition:L,interactiveMode:O,taskToCreate:V,onFinishCreateLink:ae,changingTask:B,selectedItem:e.selectedItem,onSelectItem:ne,itemheight:e.itemheight,links:e.links||[]})))))},W=e=>{const{mode:t,changeMode:s}=h.exports.useContext(b);console.log("change mode",s);const o=t=>{var o;null==s||s(t),null==(o=e.onChange)||o.call(e,t)},i=e=>t==e?{backgroundColor:"grey",boder:"solid 1px #223344"}:{};return d.createElement("div",{className:"mode-container"},d.createElement("div",{className:"mode-container-item mode-container-item-left",onClick:e=>null==o?void 0:o("day"),style:i("day")},"Day"),d.createElement("div",{className:"mode-container-item",onClick:e=>null==o?void 0:o("week"),style:i("week")},"Week"),d.createElement("div",{className:"mode-container-item",onClick:e=>null==o?void 0:o("month"),style:i("month")},"Month"),d.createElement("div",{className:"mode-container-item mode-container-item-right",onClick:e=>null==o?void 0:o("year"),style:i("year")},"Year"))};const H=[{id:1,color:"purple",name:"Test",start:new Date(2021,2,12),end:new Date(2021,5,9)},{id:1,color:"orange",name:"Test",start:new Date(2021,7,12),end:new Date(2021,12,9)}];class j extends k.exports.Component{constructor(e){super(e),this.handleDayWidth=e=>{this.setState({daysWidth:parseInt(e.target.value)})},this.handleItemHeight=e=>{this.setState({itemheight:parseInt(e.target.value)})},this.onHorizonChange=(e,t)=>{let s=H.filter((s=>s.start<e&&s.end>t||s.start>e&&s.start<t||s.end>e&&s.end<t));console.log("Calculating "),this.setState({data:s})},this.onSelectItem=e=>{console.log(`Select Item ${e}`),this.setState({selectedItem:e})},this.onUpdateTask=(e,t)=>{e.start=t.start,e.end=t.end,this.setState({data:[...this.state.data]}),console.log(`Update Item ${e}`)},this.onCreateLink=e=>{console.log(`Update Item ${e}`)},this.modeChange=e=>{this.setState({timelineMode:e})},this.addTask=()=>{let e={id:this.state.data.length+1,start:new Date,end:this.getRandomDate(),name:"New Task",color:this.getRandomColor()};this.setState({data:[e,...this.state.data]})},this.delete=()=>{if(console.log("On delete"),this.state.selectedItem){let e=this.state.links.indexOf(this.state.selectedItem);e>-1&&(this.state.links.splice(e,1),this.setState({links:[...this.state.links]})),e=this.state.data.indexOf(this.state.selectedItem),e>-1&&(this.state.data.splice(e,1),this.setState({data:[...this.state.data]}))}},this.state={itemheight:20,data:H,selectedItem:null,timelineMode:"month",links:[],nonEditableName:!1}}getbuttonStyle(e){return this.state.timelineMode==e?{backgroundColor:"grey",boder:"solid 1px #223344"}:{}}genID(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}getRandomDate(){let e=new Date;return e.setDate(e.getDate()+10*Math.random()),e}getRandomColor(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}getStripes(e,t){let s=[];for(var o=0;o<e;o++){let i=0==o||o==e-1?"#5d9634":"#538c2b";s.push(`\n        ${0==o?`#ffffff ${o*t}px,\n        #ffffff ${o*t+.5}px,`:""}\n        ${i} ${o*t+.5}px,\n        ${i} ${o*t+t}px\n        , #ffffff ${o*t}px,\n        #ffffff ${o*t+.5}px`)}return s.join(",")}getOffset(e){switch(e){case"year":return 4;default:return 0}}render(){return f.createElement("div",{className:"app-container"},f.createElement("div",{className:"nav-container"},f.createElement("div",{className:"mode-container-title"},"Full Demo"),f.createElement("div",{className:"operation-button-container"},f.createElement("div",{className:"operation-button-container"},f.createElement("div",{className:"mode-button",onClick:this.addTask},f.createElement("svg",{height:30,width:30,viewBox:"0 0 48 48"},f.createElement("path",{fill:"silver",d:"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 22h-8v8h-4v-8h-8v-4h8v-8h4v8h8v4z"}))),f.createElement("div",{className:"mode-button",onClick:this.delete},f.createElement("svg",{height:30,width:30,viewBox:"0 0 48 48"},f.createElement("path",{fill:"silver",d:"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 22H14v-4h20v4z"}))))),f.createElement(W,{onChange:e=>this.setState({timelineMode:e})})),f.createElement("div",{className:"time-line-container"},f.createElement(X,{style:{background:(e,t)=>("year"==e&&(t*=7),{background:`linear-gradient(\n                  to right, \n                  ${this.getStripes(2,t)}\n                )`,backgroundSize:2*t+"px 100%",backgroundPosition:`${this.getOffset(e)}px 0`})},data:this.state.data,links:this.state.links,onHorizonChange:this.onHorizonChange,onSelectItem:this.onSelectItem,onUpdateTask:this.onUpdateTask,onCreateLink:this.onCreateLink,mode:this.state.timelineMode,itemheight:this.state.itemheight,selectedItem:this.state.selectedItem,nonEditableName:this.state.nonEditableName})))}}y.render(f.createElement(f.StrictMode,null,f.createElement(j,null)),document.getElementById("root"));
